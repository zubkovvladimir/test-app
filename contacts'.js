(self.webpackChunktest_app=self.webpackChunktest_app||[]).push([[820],{1656:(e,r,t)=>{"use strict";t.d(r,{x:()=>s});var n=t(881),i=t(4184),o=t.n(i),a=t(5362),l=t.n(a),u=t(5893),c=n.Z.Text,s=function(e){var r=e.name,t=e.className,n=e.errorMessage,i=e.children,a=e.nameRender;return(0,u.jsxs)("section",{className:o()(l().formItem,t,{"ant-form-item-has-error":!!n}),children:[r&&!a&&(0,u.jsx)(c,{style:{marginBottom:8},children:r}),a,i,n&&(0,u.jsx)(c,{type:"danger",children:n})]})}},4544:(e,r,t)=>{"use strict";t.d(r,{D:()=>n});var n="test-app"},620:(e,r,t)=>{"use strict";t.d(r,{i:()=>n});var n=t(7007).v9},5461:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>ue});var n=t(7294),i=t(7007),o=t(1740),a=t(2326),l=t(1577),u=t(7536),c=t(8834),s=t(1382),f=t(9683),d=t(7049),p=t(3449),y=t(8089),m=t(5893),h=function(e){var r=e.title,t=e.width,n=e.isOpen,i=e.onClose,o=e.destroyOnClose,a=void 0===o||o,l=e.children;return(0,m.jsx)(y.Z,{closable:!1,destroyOnClose:a,footer:null,onCancel:i,title:r,visible:n,width:t,children:l})},g=t(7855),b=t(620),j=t(1641),v=t(9621),O=t(5019),x=t(9995),S=t(1656);function w(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Z(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?w(Object(t),!0).forEach((function(r){C(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function C(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var A=function(){var e=(0,u.Gc)().control;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u.Qr,{control:e,name:"firstName",render:function(e){var r=e.field,t=e.fieldState.error;return(0,m.jsx)(S.x,{errorMessage:null==t?void 0:t.message,name:"Имя",children:(0,m.jsx)(O.Z,Z({},r))})}}),(0,m.jsx)(u.Qr,{control:e,name:"lastName",render:function(e){var r=e.field,t=e.fieldState.error;return(0,m.jsx)(S.x,{errorMessage:null==t?void 0:t.message,name:"Фамилия",children:(0,m.jsx)(O.Z,Z({},r))})}}),(0,m.jsx)(u.Qr,{control:e,name:"patronymic",render:function(e){var r=e.field,t=e.fieldState.error;return(0,m.jsx)(S.x,{errorMessage:null==t?void 0:t.message,name:"Отчество",children:(0,m.jsx)(O.Z,Z({},r))})}}),(0,m.jsx)(u.Qr,{control:e,name:"age",render:function(e){var r=e.field,t=e.fieldState.error;return(0,m.jsx)(S.x,{errorMessage:null==t?void 0:t.message,name:"Возраст",children:(0,m.jsx)(x.Z,Z({min:1,type:"number"},r))})}})]})};function P(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function I(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?P(Object(t),!0).forEach((function(r){_(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var q=function(e){var r=e.isOpen,t=e.id,o=e.onClose,a=e.initial,y=e.page,O=(0,i.I0)(),x=(0,b.i)((function(e){return e.contacts})),S=x.isLoading,w=x.error,Z=null!==t,C=(0,u.cI)({resolver:(0,c.X)(v.U)}),P=C.handleSubmit,_=C.setValue,q=function(){O((0,j.yF)({_page:y})),o()};return(0,n.useEffect)((function(){null!==a&&(_("firstName",a.firstName),_("lastName",a.lastName),_("patronymic",a.patronymic),_("age",a.age))}),[a]),(0,m.jsx)(h,{destroyOnClose:!0,isOpen:r,onClose:o,title:Z?"Редактирование контакта":"Новый контакт",width:445,children:(0,m.jsx)(s.Z,{spinning:S,children:w&&Z?(0,m.jsx)(f.ZP,{extra:(0,m.jsx)(l.Z,{onClick:function(){Z&&O((0,j.yF)({}))},type:"primary",children:"Попробовать еще раз"},"console"),status:"warning",subTitle:w,title:g.i4.SomethingGoesWrong}):(0,m.jsxs)(u.RV,I(I({},C),{},{children:[(0,m.jsx)(A,{}),(0,m.jsx)(d.Z,{}),(0,m.jsxs)(p.Z,{size:"large",children:[(0,m.jsx)(l.Z,{onClick:P((function(e){O(Z&&t?(0,j.Tk)({id:t,data:e,onSuccess:q}):(0,j.rE)({data:e,onSuccess:q}))})),size:"large",type:"primary",children:Z?"Сохранить":"Создать"}),Z&&t&&(0,m.jsx)(l.Z,{onClick:function(){return O((0,j.GK)({id:t,onSuccess:q}))},size:"large",style:{width:"100%"},children:"Удалить"})]})]}))})})},E=t(8212),k=t(3171),D=t(2977),M=t(4634),N=t(5153),R=t(8290),z=M.Z.Column,T=(0,n.memo)((function(e){var r=e.isLoading,t=e.data,n=e.meta,o=e.onEditModalOpen,a=e.onChange,l=(0,i.I0)(),u={size:"default",showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],defaultPageSize:10,total:n.total,current:n._page,pageSize:n._limit};return(0,m.jsxs)(M.Z,{dataSource:t,loading:r,onChange:a,pagination:u,rowKey:function(e){return e.id},size:"middle",children:[(0,m.jsx)(z,{dataIndex:"id",title:"Id"},"id"),(0,m.jsx)(z,{render:function(e){var r=e.firstName,t=e.lastName,n=e.patronymic;return"".concat(r," ").concat(t," ").concat(n)},title:"ФИО"},"name"),(0,m.jsx)(z,{dataIndex:"age",title:"Возраст"},"age"),(0,m.jsx)(z,{dataIndex:"id",render:function(e,r){return(0,m.jsxs)(p.Z,{className:"ant-table-actions",size:"middle",children:[(0,m.jsx)(N.Z,{title:"Редактировать",children:(0,m.jsx)(E.Z,{onClick:function(){return o(e,r)}})}),(0,m.jsx)(R.Z,{cancelText:"Нет",okText:"Да",onConfirm:function(){return l((0,j.GK)({id:e,onSuccess:function(){return l((0,j.yF)({_page:n._page}))}}))},title:"Вы действительно хотите удалить?",children:(0,m.jsx)(k.Z,{})})]})},title:(0,m.jsx)(N.Z,{title:"Действия",children:(0,m.jsx)(D.Z,{})}),width:60},"action")]})})),F=t(7405);function B(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return L(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return L(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var U=O.Z.Search,Q=function(e){var r=e.isLoading,t=e.onSearch,i=e.renderButton,o=e.filters,a=B((0,n.useState)(!1),2),u=a[0],c=a[1];return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(p.Z,{className:"page-header",children:[t&&(0,m.jsxs)(p.Z,{children:[(0,m.jsx)(U,{disabled:r,enterButton:!0,loading:r,onSearch:t,placeholder:"Поиск"}),o&&(0,m.jsx)(N.Z,{title:"Фильтры",children:(0,m.jsx)(l.Z,{onClick:function(){return c(!u)},shape:"round",type:u?"primary":"default",children:(0,m.jsx)(F.Z,{})})})]}),i]})})},$=t(881).Z.Title,G=function(e){var r=e.children;return(0,m.jsx)($,{level:2,children:r})},K=t(4544);function V(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return X(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return X(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var W=t(1632);function Y(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return H(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return H(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function J(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ee(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?J(Object(t),!0).forEach((function(r){re(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):J(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function re(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function te(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return ne(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ne(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var ie={q:"",_sort:"",_order:"",_limit:W.F._limit,_page:W.F._page},oe=function(e){var r=e.onChange,t=te((0,n.useState)(ie),2),i=t[0],o=t[1];return[function(e){o((function(r){return ee(ee({},r),e)})),r(function(e){return Object.entries(e).reduce((function(e,r){var t=Y(r,2),n=t[0],i=t[1];return i&&(e[n]=i),e}),{})}(ee(ee({},i),e)))},i]};function ae(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return le(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return le(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}const ue=function(){var e=ae((0,n.useState)(null),2),r=e[0],t=e[1],u=(0,i.I0)(),c=(0,o.pC)(),s=function(e){var r=e.initial,t=void 0!==r&&r,i=V((0,n.useState)(t),2),o=i[0],a=i[1],l=V((0,n.useState)(null),2),u=l[0],c=l[1];return[o,function(e){e&&c(e),a(!0)},function(){c(null),a(!1)},u]}({}),f=ae(s,4),d=f[0],p=f[1],y=f[2],h=f[3],g=(0,b.i)((function(e){return e.contacts})),v=g.isLoading,O=g.items,x=g.totalCount,S=oe({onChange:function(e){u((0,j.yF)(e))}}),w=ae(S,2),Z=w[0],C=w[1];return(0,n.useEffect)((function(){u((0,j.yF)({}))}),[]),(0,a.Z)("".concat(K.D," | Контакты")),c||(0,m.jsxs)("div",{children:[(0,m.jsx)(G,{children:"Контакты"}),(0,m.jsx)(Q,{isLoading:v,onResetFilter:function(){},onSearch:function(e){return Z({q:e})},renderButton:(0,m.jsx)(l.Z,{onClick:function(){return u(p())},type:"primary",children:"Добавить"})}),(0,m.jsx)(T,{data:O,isLoading:v,meta:{_page:C._page,total:x,_limit:C._limit},onChange:function(e){var r=e.current,t=e.pageSize;return Z({_page:r,_limit:t})},onEditModalOpen:function(e,r){t(e),p(r)}}),d&&(0,m.jsx)(q,{id:r,initial:h,isOpen:d,onClose:function(){t(null),y()},page:C._page})]})}},9621:(e,r,t)=>{"use strict";t.d(r,{d:()=>o,U:()=>a});var n=t(7855),i=t(9501),o=i.Ry().shape({email:i.Z_().trim().required(n.qf.Required),password:i.Z_().trim().required(n.qf.Required)}),a=i.Ry().shape({firstName:i.Z_().trim().required(n.qf.Required),lastName:i.Z_().trim().required(n.qf.Required),patronymic:i.Z_().trim().required(n.qf.Required),age:i.Rx().typeError(n.qf.Required).required(n.qf.Required)})},5362:e=>{e.exports={formItem:"DgibXg4XIcLp+BYMBVBMzQ=="}}}]);